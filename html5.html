<!DOCTYPE html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Mk's blog | 又一个 WordPress 站点</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="stylesheet" type="text/css" media="all" href="style.css">
	<link rel="pingback" href="http://www.oozk.com/xmlrpc.php">
	<!--[if lt IE 9]>
		<script src="http://www.oozk.com/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
	<![endif]-->
</head>
  
<body>
<div id="simpage">
	<header id="banner" role="banner">
		<nav  id="navtop" role="navigation">
			<ul>
	     	   <li><a href="/">Home</a></li>
	     	   <li><a href="/products">Products</a></li>
	     	   <li><a href="/services">Services</a></li>
	     	   <li><a href="/about">About</a></li>
	   		</ul>
 	   </nav> <!-- #access -->
    </header><!-- #branding -->
 

<div id="content" role="content">
	<article id="post">
		<header class="entry-header">
				<h1 class="entry-title"><a href="http://www.oozk.com/index.php/2012/10/05/git-wei-tiyan.html" title="链向 git微体验 的固定链接" rel="bookmark">git微体验</a></h1>
					<div class="entry-meta">
				<span class="sep">发表于 </span><a href="http://www.oozk.com/index.php/2012/10/05/git-wei-tiyan.html" title="下午 5:39" rel="bookmark"><time class="entry-date" datetime="2012-10-05T17:39:16+00:00" pubdate="">2012 年 10 月 5 日</time></a><span class="by-author"> <span class="sep"> 由 </span> <span class="author vcard"><a class="url fn n" href="http://www.oozk.com/index.php/author/mk" title="查看所有由 mk 发布的文章" rel="author">mk</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link"><a href="http://www.oozk.com/index.php/2012/10/05/git-wei-tiyan.html#respond" title="《git微体验》上的评论"><span class="leave-reply">回复</span></a>			</div>
		</header><!-- .entry-header -->

				<div class="entry-content">
			<p>本文只是简单的通过创建一个本地git仓库,通过gitolite创建一个私有的git服务器,和安装一个gitweb,使之对Git有一个体验,如果打算在今后的工作中长期使用到git，推荐阅读深入阅读<a href="http://progit.org/book/zh/" target="_blank">Pro Git</a>,当然可以先简单的看一下这个 <a href="http://progit.org/book/zh/ch1-3.html" target="_blank">git 基础</a>,简单了解一下Git,这里先简单说说Git和svn的最大区别</p>
<h3>Git和svn 最大的区别</h3>
<ol>
<li>Git不像SVN会存储差异化数据，Git是为每一个新的有变化的提交添加一个新的对像,然后为之添加的对像创建一个索引,相比SVN来说,GIT会更耗费空间,但是checkout不需要像SVN那样对数据进行对比运算,所以速度会快很多</li>
<li>SVN属集中式版本管理系统，git则属分布式。从使用着的脚度来说最大的区别是svn每次只checkout最新的提交，每次的commit 
都会把数据提交的远端的仓库中心。对远端的仓库依赖斩较高。而git则会把远端的整个仓库clone回来，相当于远端一个仓库的镜像，commit时只会
把变更存储在本地的仓库，如果需要推送到远端的仓库，则需要用git push.
</li>
<li>其它的更多的区别请看这里的总结 <a href="http://simple-is-better.com/news/475" target="_blank">http://simple-is-better.com/news/475</a></li></ol>
<h3>安装git</h3>
<p>Win系统和其它平台的系统的安装,请参考这里 <a href="http://progit.org/book/zh/ch1-4.html" target="_blank">http://progit.org/book/zh/ch1-4.html</a><br>
centos推荐先安装epel的yum源,然后直接用yum install -y git 的方式安装.mac osx10.7.2以上已自带git 工具，所要不需要装。</p>
<h3>初次运行git</h3>
<p>在初次运行git的时候,需要先配置git的用户信息，用如下两条命令,Git 的其它可选配置项参考这里<a href="http://www.oozk.com/%3Cbr%20/%3Ehttp://progit.org/book/zh/ch1-5.html" target="_blank">http://progit.org/book/zh/ch1-5.html”</a></p>
<pre>$git config --global user.name "mk"
$git config --global user.email “root@mkrss.com”
</pre>
<h3>建立一个本地的git 仓库</h3>
<p>Git建立一个Git仓库有两种方法，一是进入到一个工作目录,然后运行 git init,执行git init后会在工作目录中生成一个 .git 的目录,这个工作目录就成为一个Git仓库了.如
</p><pre>mkdir -p git ; cd git;git init </pre>
<p>另一个方法是通过git clone命令clone一个远端的空仓库，如
</p><pre>git clone git://git.oozk.com/testing.git</pre>
<h3>git的基本操作命令</h3>
<p>  这里主要描述一下,向git仓库添加,删除,提交,撤销提交,查看提交状态几个常用命令,我以git仓库为例<br>
   #创建一个名为工作区并初始化为git仓库.</p>
<pre>mkdir -p git;cd git; git init;    </pre>
<p>  添加一个README的文件到工作区,并添加进git仓库, 向git 仓库中添加一个文件,执行完后此文件会放在暂存区,在执行了commit 之后,文件会从暂存区删除,如果想了解更深入的细节 请看这里 <a href="http://progit.org/book/zh/ch2-2.html">记录每次更新到仓库</a> </p>
<pre> echo "README"  &gt;&gt;README 
 git add ./README  </pre>
<p>  #提前之前添加文件的的变更到git仓库,添加提交说明,并 查看当前的提交及文件状态,查看提交Log
</p><pre> git commit -m “added new file  README”
 git status     
 git log </pre>
<p>#变更一下README文件,然后进行一次提交,然后我们在撤销本次提交.</p>
<pre> echo "test reset"  &gt;&gt;README #变更README 文件
 git add ./README
 git status 
 git reset ;or  git checkout
 git status </pre>
<p>#先创建一个文件,先ADD.然后再删除提交
</p><pre> echo "delete" &gt;&gt;delete  
 git add ./delete 
 git status
 git rm delete 
 git status</pre>
<p>更多git命令 查看 <a href="http://progit.org/book/zh/ch2-3.html" target="_blank">http://progit.org/book/zh/ch2-3.html </a></p>
<h1>Git 仓库的公共访问</h1>
<p>Git 支持许多数据传输协议。 可以通过ssh://,http://和git://,及file:/// 对git仓库进行访问，各种协议的使用及优劣,请看这里 <a href="http://progit.org/book/zh/ch4-1.html">http://progit.org/book/zh/ch4-1.html </a> 我个人是觉得．通过开启http的方式进行GIT仓库的私有访问，是最简单的了详细方法看这里 <a href="http://progit.org/book/zh/ch4-5.html">http://progit.org/book/zh/ch4-5.html</a>,但不管用哪个协议,创建一个私有git服务器是有必要的,如果你愿意所全世界的的都可以访问你的仓库,那用用github就可以</p>
<h1>通过gitolite构建一个私有的git服务器</h1>
<p>gitolte是专门用来构建git服务器的软件之一，易用，简单，相对git本身构建的git服务器，他可以让你更从容的管理好你的的git仓库,安装gitolite也很简单，在动手安装之前可以看一下官方出品的<a href="http://sitaramc.github.com/gitolite/pictures.html#1000_words_installation_and_setup_">1000_words_installation_and_setup</a>在centos5或是Mac上安装gitolite 过程如下,如服务器的址为git.oozk.com,通过 ssh git.oozk.com 登陆服务器后<br>
1.服务器端的操作</p>
<pre>    cd /tmp  ；
    git clone git://github.com/sitaramc/gitolite     #获取gitolite的安装代码
    useradd  -d /data/githome   -s /bin/bash  git    #添加一个git的用户，设定主目录为/data/githome
    su git -  #切换到git 用户
    /tmp/gitolite/src/gl-system-install   #会安装gitolite 相关的文件到/data/githome 目录下</pre>
<p>2.在工作机上生成key文件，并上传到服务器上</p>
<pre>      ssh-keygen -t rsa -C "root@mkrss.com"     ＃会在用户的主录的.ssh目录下生成id_rsa私钥和id_rsa.pub 公钥
      scp ~/.ssh/id_rsa.pub  root@git.oozk.com:/tmp/git.pub #注意刚才添加的git用户默认没有开启密码登陆，所以SCP时不能用git 用户。</pre>
<p>3.回到远端的git服务器git.oozk.com上,通过 echo  $USER 确认是在git用户下后,执行如下命令</p>
<pre>      gl-setup -q /tmp/git.pub</pre>
<p>此时已经拥有一个git 服务器了,可在工作机上通过</p>
<pre>git clone git@git.oozk.com:gitolite-admin #把git服务器上的gitolite-admin仓库clone 下来。</pre>
<p>4.为git服务器添加一个git仓库<br>
添加git 仓库的方法有多种,这里通过修改gitolite-admin仓库里的conf/gitolite.conf文件的方法行添加.其它方法自行google<br>
编辑 conf/gitolite.conf文件添加如下内容，然后保存,然后提交到远端的git服务器既可添加一个空的仓库</p>
<pre>       repo git
           RW+     =   git

          git add . ;
          git commit -m "added git reps"
          git push ; </pre>
<p>关于git仓库的权限及ACL系统,可点这里进行了解<a href="http://www.ossxp.com/doc/git/gitolite.html#id13" target="_blank">版本库ACL</a><br>
5.使用远端的空仓库</p>
<pre>      git clone git@git.oozk.com:git.git
      cd git
      touch README；
      git commit -m "added README"；
      git push origin master #把添加的README文件推送到远端的仓库上</pre>
<p>向一个空的仓库push的时候,需要先执行git push origin master,参考这里 <a href="http://answers.codespaces.com/questions/can-t-do-a-git-push"> can-t-do-a-git-push</a>和<a href="http://stackoverflow.com/questions/827351/push-origin-master-error-on-new-repository">push-origin-master-error-on-new-repository</a></p>
<h1>安装gitweb</h1>
<p>在mac上安装gitweb 很简单</p>
<pre>  gem install webrick;然后进入到一个git仓库执行 git instaweb --httpd=webrick ，既可
  在centos5上安装gitweb则有些麻烦，安装epel的yum源,然后
  gem install webrick,
  yum install gitweb -y
  cd testing.git ＃进入一个git仓库
  git instaweb --httpd=webrick ＃此步会监听本1234端口</pre>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">发表在</span> <a href="http://www.oozk.com/index.php/category/uncategorized" title="查看 未分类 中的全部文章" rel="category tag">未分类</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">标签有</span> <a href="http://www.oozk.com/index.php/tag/git" rel="tag">git</a>			</span>
						
									<span class="sep"> | </span>
						<span class="comments-link"><a href="http://www.oozk.com/index.php/2012/10/05/git-wei-tiyan.html#respond" title="《git微体验》上的评论"><span class="leave-reply">发表回复</span></a></span>
			
					</footer><!-- #entry-meta -->
					
	</article><!-- #post-3 -->
	
			</div><!-- #content -->
			
						<div id="comments">
	
	
	
									<div id="respond">
				<h3 id="reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.oozk.com/index.php/2012/10/05/git-wei-tiyan.html#respond" style="display: none;">取消回复</a></small></h3>
									<form action="http://www.oozk.com/wp-comments-post.php" method="post" id="commentform">
																			<p class="comment-notes">电子邮件地址不会被公开。 必填项已用 <span class="required">*</span> 标注</p>							<p class="comment-form-author"><label for="author">姓名</label> <span class="required">*</span><input id="author" name="author" size="30" aria-required="true" type="text"></p>
<p class="comment-form-email"><label for="email">电子邮件</label> <span class="required">*</span><input id="email" name="email" size="30" aria-required="true" type="text"></p>
<p class="comment-form-url"><label for="url">站点</label><input id="url" name="url" size="30" type="text"></p>
												<p class="comment-form-comment"><label for="comment">评论</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">您可以使用这些 <abbr title="HyperText Markup Language">HTML</abbr> 标签和属性： <code>&lt;a
 href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; 
&lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del 
datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;strike&gt; 
&lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" id="submit" value="发表评论" type="submit">
							<input name="comment_post_ID" value="3" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
						</p>
											</form>
							</div><!-- #respond -->
						
</div><!-- #comments -->

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			<div id="site-generator">
								<a href="http://cn.wordpress.org/" title="优雅的个人发布平台" rel="generator">自豪地采用 WordPress</a>
			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->

			
			
			
			<footer id="footer" role="contentinfo">  
				<span> Copyright © 2012-2012 mk &nbsp;&nbsp;&nbsp; 14 queries. 0.118 seconds.</span> <a href="feed://b.oozk.com/index.php/feed" class="rss">subscribe via rss</a>	
			</footer><!-- #colophon -->
		</div><!-- #primary -->
	</div><!-- #main -->
</div> 
</div><!-- #page -->
</body>